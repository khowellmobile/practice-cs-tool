{% load static %}

<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="{% static 'css/common_style.css' %}" />
        <link
            rel="stylesheet"
            href="{% static 'css/change_database_style.css' %}"
        />

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    </head>

    <body>
        <p class="login-signifier">Welcome, {{ user.first_name }}</p>
        <div class="container-1">
            <button
                id="logout-button"
                class="button-1"
                onclick="redirectTo('/logout/')"
            >
                Logout
            </button>
            <div id="database-change">
                <div id="database-change__header" class="card">
                    <h1>Change Database</h1>
                    <button class="button-1" onclick="redirectTo('/home/')">
                        Back to home
                    </button>
                </div>
                <div id="database-change__form" class="card">
                    <h3>Form:</h3>
                    <label for="input_engine" class="form__label"
                        >Database Engine</label
                    >
                    <input
                        type="text"
                        class="form__input"
                        id="input_engine"
                        placeholder="Database Engine"
                        required=""
                    />
                    <br />
                    <label for="input_name" class="form__label"
                        >Database Name</label
                    >
                    <input
                        type="text"
                        class="form__input"
                        id="input_name"
                        placeholder="Database Name"
                        required=""
                    />
                    <br />
                    <label for="input_host" class="form__label"
                        >Database Host</label
                    >
                    <input
                        type="text"
                        class="form__input"
                        id="input_host"
                        placeholder="Database Host"
                        required=""
                    />
                    <h3>Options:</h3>
                    <label for="input_driver" class="form__label"
                        >Database Driver</label
                    >
                    <input
                        type="text"
                        class="form__input"
                        id="input_driver"
                        placeholder="Database Driver"
                        required=""
                    />
                    <br />
                    <label for="input_user" class="form__label">Username</label>
                    <input
                        type="text"
                        class="form__input"
                        id="input_user"
                        placeholder="Username"
                        required=""
                    />
                    <br />
                    <label for="input_pass" class="form__label"
                        >Password</label
                    >
                    <input
                        type="password"
                        class="form__input"
                        id="input_pass"
                        placeholder="Password"
                        required=""
                    />
                    <p id="form__note">
                        Note: Leaving the Username and Password Blank will use
                        Windows Authentication instead
                    </p>
                </div>
                <br />
                <div id="database-change__info">
                    <div id="d">
                        <div id="database-change__info-button">
                            <button
                                id="but"
                                class="button-1"
                                onclick="getNewConfig()"
                            >
                                Connect Database
                            </button>
                        </div>
                        <div id="database-change__current-connection" class="card">
                            <div id="database-change__current-connection__info">
                                <h3>Currently Connected To:</h3>
                                <h4>Database Engine:</h4>
                                <p id="curr_engine">{{ db_info.db_engine }}</p>
                                <br />
                                <h4>Database Name:</h4>
                                <p id="curr_name">{{ db_info.db_name }}</p>
                                <br />
                                <h4>Database Host:</h4>
                                <p id="curr_host">{{ db_info.db_host }}</p>
                            </div>
                            <div id="database-change__current-connection__spinner">
                                <div class="spinner"></div>
                            </div>
                        </div>
                    </div>
                    <div id="database-change__status" class="scroller card">
                        <h3>Status / Messages:</h3>
                    </div>
                </div>
            </div>
        </div>
        <!-- Links to .js files and getting csrf_token -->
        <script src="{% static 'js/common_script.js' %}"></script>
        <script src="{% static 'js/change_database_script.js' %}"></script>
        <script>
            // Easier to get csrf token from template
            var csrf_token = "{{ csrf_token }}";
        </script>
    </body>
</html>
